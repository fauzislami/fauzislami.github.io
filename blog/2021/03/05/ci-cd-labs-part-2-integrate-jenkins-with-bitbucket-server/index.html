<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FF4D4D;
        }
    </style>

    
    
    
    
    
    

    
    <title>CI/CD Labs Part 2: Integrate Jenkins with Bitbucket Server</title>
    <meta name="description" content="/home/fauzislami/blog">
    <meta name="keywords" content='blog, gokarna, hugo, BitBucket, CI/CD, Jenkins'>

    <meta property="og:url" content="https://fauzislami.github.io/blog/2021/03/05/ci-cd-labs-part-2-integrate-jenkins-with-bitbucket-server/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="CI/CD Labs Part 2: Integrate Jenkins with Bitbucket Server">
    <meta property="og:description" content="/home/fauzislami/blog">
    <meta property="og:image" content="/images/logo-blog-oji.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CI/CD Labs Part 2: Integrate Jenkins with Bitbucket Server">
    <meta name="twitter:description" content="/home/fauzislami/blog">
    <meta property="twitter:domain" content="https://fauzislami.github.io/blog/2021/03/05/ci-cd-labs-part-2-integrate-jenkins-with-bitbucket-server/">
    <meta property="twitter:url" content="https://fauzislami.github.io/blog/2021/03/05/ci-cd-labs-part-2-integrate-jenkins-with-bitbucket-server/">
    <meta name="twitter:image" content="/images/logo-blog-oji.png">

    
    <link rel="canonical" href="https://fauzislami.github.io/blog/2021/03/05/ci-cd-labs-part-2-integrate-jenkins-with-bitbucket-server/" />

    <link rel="stylesheet" type="text/css" href="/css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="/css/dark.css">

    <script src="/js/svg-injector.min.js"></script>
    <script src="/js/feather-icons.min.js"></script>
    <script src="/js/main.js"></script>

    
    
        <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.css" integrity="sha384-6LkG2wmY8FK9E0vU9OOr8UvLwsaqUg9SETfpq4uTCN1agNe8HRdE9ABlk+fVx6gZ" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/katex.min.js" integrity="sha384-31El76TwmbHj4rF9DyLsygbq6xoIobG0W+jqXim+a3dU9W53tdH3A/ngRPxOzzaB" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.16/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
  
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://fauzislami.github.io/">
                <img src="/images/logo-blog-oji.png" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://fauzislami.github.io/">Blog · Muhammad Fauzi Islami</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="/"> Home </a>
            </div>
            
            <div class="nav-link">
                <a href="/posts/"> Posts </a>
            </div>
            
            <div class="nav-link">
                <a href="/thoughts/"> Thoughts </a>
            </div>
            
            <div class="nav-link">
                <a href="https://about.me/fauzislami"> About Me </a>
            </div>
            
            <div class="nav-link">
                <a href="/tags/"> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://github.com/fauzislami"><span data-feather='github'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="/"> Home </a>
                </li>
                
                <li class="nav-item">
                    <a href="/posts/"> Posts </a>
                </li>
                
                <li class="nav-item">
                    <a href="/thoughts/"> Thoughts </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://about.me/fauzislami"> About Me </a>
                </li>
                
                <li class="nav-item">
                    <a href="/tags/"> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://github.com/fauzislami"><span data-feather='github'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">

    <div class="post-header-section">
        <h1>CI/CD Labs Part 2: Integrate Jenkins with Bitbucket Server</h1>
        <small role="doc-subtitle"></small>
        <p class="post-date">
            March 5, 2021
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="/tags/bitbucket">BitBucket</a></li>
        
            <li class="post-tag"><a href="/tags/ci/cd">CI/CD</a></li>
        
            <li class="post-tag"><a href="/tags/jenkins">Jenkins</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <p><img src="/images/ci-cd-labs-part2/1.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>In this part 2 of the CI / CD labs, I will document how to do Jenkins integration with the Bitbucket server (not the cloud).</p>
<p>What should be prepared :</p>
<p>1 VM (Jenkins + Bitbucket Server)<br>
Specifications :<br>
• OS Centos 7.9 (optional)<br>
• RAM: 16GB (this will be used until labs get finished)<br>
• CPU: 4vCPU<br>
• HDD: 100GB<br>
• Internet connection</p>
<p>Inside the VM are installed as follows :</p>
<p><strong>Jenkins (run as a service)</strong><br>
– Openjdk1.8<br>
– Maven 3.6.3<br>
– Docker client<br>
– Git<br>
– IP address = 192.168.1.116:8080</p>
<p><strong>Bitbucket Server (run as a container)</strong><br>
– IP address = 192.168.1.116:7990</p>
<p><strong>Bitbucket Server Configurations</strong></p>
<p>Bitbucket Server is a git-based source code management which is self-hosted. It’s different with Bitbucket.org that we may access it publicly, but they still have the same main functionality, that is as a source code repository.</p>
<p>Here are the configuration steps:</p>
<ul>
<li>Login to Bitbucket as an admin, then create a Personal Access Token</li>
</ul>
<p><img src="/images/ci-cd-labs-part2/2.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<ul>
<li>The following is a token that has been created (it must be noted because it can’t be seen again after the continue button is pressed)</li>
</ul>
<p><img src="/images/ci-cd-labs-part2/3.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p><img src="/images/ci-cd-labs-part2/15.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<ul>
<li>Then create a new project<!-- raw HTML omitted --></li>
</ul>
<p><img src="/images/ci-cd-labs-part2/4.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<ul>
<li>This is a project that was created:<!-- raw HTML omitted --></li>
</ul>
<p><img src="/images/ci-cd-labs-part2/5.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>Furthermore, from this project we create a new repository<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/6.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>The following is the contents of the new repository which has been filled in by the files used in the previous lab.<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/7.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>The final step is to create a webhook in the repository<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/8.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p><strong>Jenkins Configurations</strong></p>
<p>Here are the configuration steps:</p>
<ul>
<li>Log in first as an admin to Jenkins<!-- raw HTML omitted --></li>
</ul>
<p><img src="/images/ci-cd-labs-part2/9.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>Install the required plugins on the <strong>Manage Jenkins</strong> menu -&gt; <strong>Manage Plugins</strong> -&gt; [TAB] <strong>Available</strong>. Then install the plugin below:<br>
– Bitbucket Server Integration</p>
<p>Then select <strong>Install without restart</strong></p>
<p>Now I will create a credential in Jenkins using the token previously generated in Bitbucket.<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/10.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>Then it’s time to integrate jenkins to bitbucket by going to the <strong>Manage Jenkins menu</strong> -&gt; <strong>Configure System</strong> -&gt; <strong>Bitbucket Server Integration</strong>. Provide an instance name for the bitbucket and the URL of the bitbucket server to integrate to. Then for the token enter the token that was previously created. Then to make sure Jenkins can <strong><em>handshake</em></strong> the Bitbucket, click the test connection button.<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/11.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>Then the final step is to create a job from a pipeline defined in the Jenkinsfile which is stored in the Bitbucket repository that was created in the previous step.</p>
<p>Select <strong>New Item</strong> -&gt; <strong>Pipeline</strong>, then name the job. Then in the <strong>Build Triggers</strong> field, do a check-list on the <strong>Bitbucket Server trigger build after push</strong> checkbox. And the <strong>Pipeline</strong> field can be adjusted as shown below:<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/12.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
<p>Then save it.</p>
<p>Then do the build (either by making changes to the repository or by doing a manual build). It can be seen that the pipeline was going well and being successful.<!-- raw HTML omitted --></p>
<p><img src="/images/ci-cd-labs-part2/13.png" alt="CI/CD Part 2" title="CI/CD Part 2"></p>
        </p>
    </div>
</div>



    

        </main><footer class="footer">
    <span>&copy; 2024 Fauzi Islami</span>
</footer>
</body>
</html>
